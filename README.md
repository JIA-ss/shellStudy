# shell编程

## 1. grep工具

**语法：**

> \# grep [选项] '关键字' 文件名

**选项:**

>--color=auto: 高亮显示关键字
>
>>alias grep='grep --color=auto' 更改grep别名
>>
>>可以将其写到/etc/bashrc即可，记得source
>
>> ^行首
>>
>> $行尾
>>
>> >grep '^root' file
>> >
>> >grep 'bash$' file
>
>-n: 显示行号
>
>-i: 不区分大小写
>
>-v: 取反
>
>-A: 向后取xxx行
>
>-B: 向前取
>
>-C: 向前后取
>
>-w: 根据单词过滤 
>
>-E: 扩展正则匹配

## 2. cut工具

**语法:**

```#cut 选项 文件名```

**常见选项**

```shell
-c: 以字符为单位进行分割，截取
-d: 自定义分隔符，默认制表符\t
-f: 与-d一起使用，指定截取哪个区域
```

**举例**

```shell
cut -d: -f1,7 filename #以:为分割，取第1列和第7列 
cut -c1-5 filename #取1-5列
cut -c10- filename #取10列及以后
cut -c3 filename #取第三个字符
```



## 3. sort工具

> 用于排序，将文件的每一行作为一个单位，从首字符向后，一次按照ASCII码进行比较，最后升序输出

**语法:**

```shell
-u: 去除重复行
-r: 降序排列，默认升序
-o: 将排序结果输出到文件中，类似于重定向
-n: 以数字排序，默认是按照字符排序
-t: 分隔符
-k: 第k列
-b: 忽略前导空格
-R: 随机排序
```

**举例**

```shell
sort -n -t: -k3 filename #用数字生序排列，用:分割，按照第三列排序
sort -u filename #去重，且按照第一列的ASCII码排序
```

## 4. uniq工具

> 用于去重的工具

```shell
-i: 忽略大小写
-c: 统计重复行次数
-d: 只显示重复行
#举例说明
uniq filename
uniq -d filename
uniq -dc filename
```

## 5. tee工具

> 从标准输入读取，写入到标准输出和文件，即：双向覆盖重定向
>
> 既显示，又重定向

```shell
-a: 追加
```

## 6. diff工具

> 用于逐行比较文件的不同

```shell
diff [选项] 文件1 文件2
```

```shell
-b: 不检查空格
-B: 不检查空白行
-i: 不检查大小写
-w: 忽略所有空格
--normal: 正常格式显示
-
```

## 7. paste工具

> 用于合并文件行

```shell
-d: 自定义间隔符，默认tab
-s: 串行处理，非并行
```

## 8. tr工具

> 字符转换、替换、删除，主要用于删除文件中的控制字符，或者字符转换
>
> tr是单个字符的替换，如果第一个string有多个字符，那么每个字符都会被替换一次，而不是整体替换

```shell
# 1. 命令的执行结果，交给tr处理，string1用于查询，string2用于替换
command | tr 'string1' 'string2'
# 2. tr的处理内容来自文件，记住要使用<标准输入
tr 'string1' 'string2' < filename

# 3. 匹配string1进行相应操作，如删除操作
tr [options] 'string1' < filename
-d: 删除字符串1中所有输入字符
-s: 删除所有重复出现字符序列，只保留第一个；即将重复出现字符串压缩为一个字符串

[:lower:] -> a-z
[:upper:] -> A-Z
[:digit:] -> 0-9
[:alnum:] -> 所有字母和数组
[:alpha:] -> 所有字母
[:blank:] -> 所有水平空白
[:punct:] -> 匹配所有标点符号
[:space:] -> 所有水平会垂直的空格
[:cntrl:] -> 所有控制字符
```

## 9. 快捷键

```shell
^z #将前台运行的程序挂起到后台
^d #退出，等价exit
^l #清屏
^a #光标移到命令行最前端
^e #光标移到命令行最后端
^u #删除光标前的所有字符
^k #删除光标后的所有字符
^r #搜索历史命令
```



